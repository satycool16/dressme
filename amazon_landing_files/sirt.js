P.when("A").register("sirt-marketplace-info",function(){function e(){return document.location.host.match(/amazon.+$/)[0].replace(/\:\d+/,"")}var t=null,r={"amazon.com":[1,"US","na","ATVPDKIKX0DER","US","ATVPDKIKX0DER"],"amazon.co.uk":[3,"UK","eu","A1F83G8C2ARO7P","GB","A3P5ROKL5A1OLE"],"amazon.de":[4,"DE","eu","A1PA6795UKMFR9","DE","A3JWKAKR8XB7XF"],"amazon.fr":[5,"FR","eu","A13V1IB3VIYZZH","FR","A1X6FK5RDHNB96"],"amazon.es":[44551,"ES","es","A1RKKUPIHCS9HS","ES","A1AT7YVPFBWXBL"],"amazon.in":[44571,"IN","eu","A21TJRUUN4KGV","IN","AT95IG9ONZD7S"],"amazon.it":[35691,"IT","it","APJ6JRA9NG5V4","IT","A11IL2PNWYJU7H"],"amazon.co.jp":[6,"JP","fe","A1VC38T7YXB528","JP","AN1VRQENFRJN5"],"amazon.cn":[3240,"CN","cn","AAHKV2X7AFYLW","CN","A1AJ19PSB66TGU"],"amazon.ca":[7,"CA","ca","A2EUQ1WTGCTBG2","CA","A3DWYIK6Y9EEQB"],"amazon.com.mx":[771770,"MX","na","A1AM78C64UM0Y8","MX","AVDBXBAVVSXLQ"],"amazon.com.au":[111172,"AU","fe","A39IBJ37TRP1C6","AU","ANEGB3WVEVKZB"]};return{getMarketplace:function(){return null==t&&(t=e()),t},getMarketplaceId:function(){return r[this.getMarketplace()][0]},getMarketplaceName:function(){return r[this.getMarketplace()][1]},getStack:function(){return r[this.getMarketplace()][2]},getObfuscatedMarketplace:function(){return r[this.getMarketplace()][3]},getAlternateMarketplaceName:function(){return r[this.getMarketplace()][4]},getMerchantId:function(){return r[this.getMarketplace()][5]}}}),P.when("A").register("sirt-acs-data",function(){return{B005LRN2YI:"help",ACSHELPAU1:"help",ACSHELPBR1:"help",ACSHELPMX1:"help",B007SNNKKE:"help",B007RHL1NO:"help",B007RORV18:"help",B007ROSFHM:"help",B007ROTNW8:"help",B007TNLVFO:"help",B007ROSY0K:"help",B007ROUN4K:"help",B007TNXNUA:"help",B005LRR5CI:"wishlist",B007SNNKTK:"wishlist",B007ROR41U:"wishlist",B007RORVFO:"wishlist",B007ROSFQI:"wishlist",B007ROSYL4:"wishlist",B007ROTOFE:"wishlist",B007ROUNS6:"wishlist",B005LRRPZA:"wedding-registry",B005LRS30G:"baby-registry",B007TNXPH6:"brand-store",B00NAJWR4K:"brand-store",B007TNLWVW:"brand-store",B00NB7XNKS:"brand-store",B005LRS9Y6:"brand-store",B007HOUAV6:"best-seller",B007RP7IY1:"bookseries2",B007RP7J8M:"imdb",B007RP7KO0:"moviefinder",ACSVBGNA01:"vs-buying-guide",B007RP7JU0:"hsosmartcategories",ACSHSOCCA1:"hsosmartcategories",ACSHSOCCN1:"hsosmartcategories",ACSRPPNA15:"rppbrandstore",B00T6TNUH6:"hsosmartcategories",ACSHSOCES1:"hsosmartcategories",ACSHSOCFR1:"hsosmartcategories",ACSHSOCIN1:"hsosmartcategories",ACSHSOCIT1:"hsosmartcategories",ACSHSOCJP1:"hsosmartcategories",B00SG78GB4:"hsosmartcategories",ACSHSOV2NA:"multiscopingv2",ACSHSOV2DE:"multiscopingv2",ACSHSOV2ES:"multiscopingv2",ACSHSOV2FR:"multiscopingv2",ACSHSOV2IN:"multiscopingv2",ACSHSOV2IT:"multiscopingv2",ACSHSOV2UK:"multiscopingv2",ACSHSOCNA2:"multiscopingmobile",ACSHSOCCA2:"multiscopingmobile",ACSHSOCCN2:"multiscopingmobile",ACSHSOCDE2:"multiscopingmobile",ACSHSOCES2:"multiscopingmobile",ACSHSOCFR2:"multiscopingmobile",ACSHSOCIN2:"multiscopingmobile",ACSHSOCIT2:"multiscopingmobile",ACSHSOCJP2:"multiscopingmobile",ACSHSOCUK2:"multiscopingmobile",ACSHSOCNA3:"multiscopingmobileapp",ACSHSOCCA3:"multiscopingmobileapp",ACSHSOCCN3:"multiscopingmobileapp",ACSHSOCDE3:"multiscopingmobileapp",ACSHSOCES3:"multiscopingmobileapp",ACSHSOCFR3:"multiscopingmobileapp",ACSHSOCIN3:"multiscopingmobileapp",ACSHSOCIT3:"multiscopingmobileapp",ACSHSOCJP3:"multiscopingmobileapp",ACSHSOCUK3:"multiscopingmobileapp",B00BSD8ZWI:"artists",B00BSD90MC:"authors",B007ROUPW0:"authors",B007ROR4PG:"authors",B007RORVUO:"authors",B007ROSG2G:"authors",B007ROUTLC:"artists",B007ROR582:"artists",B007RORW9E:"artists",B007ROSGDA:"artists",B00BSD91DU:"automotive",B00FW44VAO:"custom-stores",B00NAK2JZG:"custom-stores",B007TNLX7A:"custom-stores",B00O5H7F9S:"custom-stores",B00BSD922A:"custom-stores","B00BSD922A ":"custom-stores",B00BSD931K:"pantry"}}),P.when("A","ready").register("sirt-cookie-util",function(){function e(e){for(var t=document.cookie.split("; "),r=0;r<t.length;r++){var n=t[r].split("=");if(n[0]===e)return!0}return!1}function t(e,t){var r=new Date;r=new Date(r.getFullYear()+2,r.getMonth()),document.cookie=e+"="+t+"; expires="+r.toGMTString()+"; path=/"}function r(e){var t="; "+document.cookie,r=t.split("; "+e+"=");if(2==r.length)return r.pop().split(";").shift()}return{isSet:e,set:t,get:r}}),P.when("A","ready").register("sirt-util",function(e){function t(e){return null!=e?e.replace(c,"").replace(u,""):e}function r(e,t){if(null==t)return null;var r=l(t),n=null;return null==r.query?n:(null!=r.params[e]&&(n=r.params[e]),n)}function n(e,t){if(!(e instanceof RegExp))throw new Error("regex should be a regular expression");for(var r=null,n=[];r=e.exec(t);)n.push(r[1]);return n[n.length-1]}function a(e,t){var r=e,n=t;t.length>e.length&&(n=e,r=t);for(var a={},i=0;i<n.length;i++)a[n[i]]=1;for(var i=0;i<r.length;i++)if(null==a[r[i]])return r[i]}function i(){return function(){var e=document.createElement("a");return e.href=p("base").first().attr("href"),e}()}function o(e){if(null==e)return null;if(/^https?/.test(e))return e;var t=i();return t.protocol+"//"+t.hostname+e}function s(e,t){return e.replace(/\{([A-Za-z]+)\}/g,function(e,r){return t.hasOwnProperty(r)?t[r]:"{"+r+"}"})}function l(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){for(var e,r={},n=t.search.replace(/^\?/,"").split("&"),a=n.length,i=0;i<a;i++)n[i]&&(e=n[i].split("="),r[e[0]]=decodeURIComponent(e[1]));return r}()}}var c=/\u21b5/g,u=/^\s+|\s+$/g,p=e.$;return{trim:t,getParamValue:r,getLastMatch:n,findMissingElement:a,completeUrl:o,template:s}}),P.when("A","sirt-marketplace-info","sirt-util","ready").register("sirt-base-extractors",function(e,t,r){function n(t){for(var n=[],a=e.$.extend({},I,{asin:t}),i=0;i<y.length;i++)n.push("["+y[i].label+"]("+r.template(y[i].url,a)+")");return n.join(" / ")}function a(e){var t=e.find("a[href*='ref=sr_nr_seeall']").last(),r=null;return t.length&&(r=t.text().match(x),null!=r&&(r=r[1])),null==r&&(r=c()),r}function i(){return e.$("#generalInfo").length>0}function o(){if(/debug=service/.test(document.location)===!0&&i()){var t=new e.$.Deferred;return t.resolve(e.$("html")[0].outerHTML),t}return e.$.ajax({url:document.location+"&debug=service&debug=weblab",type:"GET"})}function s(t){return e.$(t).find("#rsasInfo a[href*=service-tester]").attr("href")}function l(e){e=decodeURIComponent(e);var t=null;if(/weblabs=/.test(e)){t=decodeURIComponent(e.match(/weblabs=([^&]+)&.*/)[1]),t=t.split(",");for(var r=0;r<t.length;r++)t[r]=t[r].replace(/([^\:]+)(\:.*)/,"$1$2 | [SIM Search](https://issues.amazon.com/issues/search?q=in%3A%288807f13e-f75b-4cba-bcaa-90c2f70b0671%29+%28$1%29&sort=lastUpdatedDate+desc&selectedDocument=c568d823-2bf8-4f3d-9e53-d41ecf9ace09) | [Design Wiki Search](https://w.amazon.com/index.php/Special:Search?title=Special%3ASearch&fulltext=Search&search=$1) | [Weblab Portal](https://weblab-redesign.amazon.com/#$1/get)")}return null!=t?"***\n**Weblabs**\n"+t.join("\n")+"\n":t}function c(){var t=e.$("#s-result-count").text().match(w);return null!=t&&(t=t[1]),t}function u(){return e.$("#searchSortForm option:selected").text()}function p(t){var r=e.$(t).find("input.treatmentInput[id*='weblab_SPONSOREDLINKS_']");return r=r.map(function(t,r){var n=r.id.replace("weblab_",""),a=e.$(r).val();return n+":"+a+" | [SIM Search](https://issues.amazon.com/issues/search?q=in%3A%288807f13e-f75b-4cba-bcaa-90c2f70b0671%29+%28"+n+"%29&sort=lastUpdatedDate+desc&selectedDocument=c568d823-2bf8-4f3d-9e53-d41ecf9ace09) | [Design Wiki Search](https://w.amazon.com/index.php/Special:Search?title=Special%3ASearch&fulltext=Search&search="+n+") | [Weblab Portal](https://weblab-redesign.amazon.com/#"+n+"/get)"}),null!=r?Array.prototype.join.call(r,"\n"):null}function d(){return o().pipe(function(r){var n=e.$(r),a=n.find("#generalInfo li:contains(Store)").text().match(/Store\:\s+(.+)/);null!=a&&(a=a[1]);var i=n.find("#generalInfo li:contains(SearchAlias)").text().match(/SearchAlias\:\s+(.+)/);null!=i&&(i=i[1]);var o=t.getMarketplace(),c=t.getMarketplaceId(),u=t.getMarketplaceName().toLowerCase(),d=s(r),m=null;null!=d&&(m=l(d));var f=p(r);return{store:a,searchAlias:i,marketplace:o,marketplaceId:c,searchServiceUrl:d,weblabs:m,slWeblabs:f,marketplaceShortName:u}})}function m(){var e=r.getParamValue("field-keywords",document.URL);if(null==e&&(e=r.getParamValue("keywords",document.URL)),null==e)if(e=r.getParamValue("rh",document.URL),null!=e)for(var t=e.split(","),n=0,a=t.length;n<a;n++){var i=t[n].split(":");if("k"===i[0]){e=decodeURIComponent(i[1]);break}}else e="";return e}var f="http://www.{marketplace}/gp/private/catalog/dumper.html?ASIN={asin}",h="https://csi.amazon.com/view?view=simple_product_data_view&marketplace_id={marketplaceId}&stage=prod&item_id={asin}",g="https://ir-relationship-management.amazon.com/#product_{asin}*",S="http://bas-query-tool-{stack}.amazon.com/gp/internal/assignment/query-tool.html?asins={asin}%3A{marketplaceId}&assignments=1",v="http://offerservice-dumper-tools.amazon.com:8000/offer_service.cgi?marketplace={alternateMarketplaceName}&marketplaceId=&realm=USAmazon&environment=prod&olid=&asin={asin}&mid=other&othermid=&sku=&method=getOfferListingsForASIN&start=&size=&relationshipType=&discriminator=&fmid=&sortorder=ByPrice&cond=Any&qual=%28qual%2Cunqual%29&variationfilter=&sid=&server=&clientid=&fmatreatment=&showDetailedInfo=yes&toXML=true&rawXML=false&getOffersButton=Get+Offer%28s%29",b="http://stack-tools.{stack}-prod.search.amazon.com/sdm.cgi?docid={asin}{docIdSuffix}",A="https://a9-search-client-tools.amazon.com/check-doc.cgi?docid={asin}&submit={marketplaceShortName}",k="https://analytics.search.amazon.com/controller.php?rn=asins_mvc#asin={asin}&marketplace={marketplaceId}&alias=All",C="http://www.amazon.com/mn/search/tools/service/product?asin={asin}&service=pas",w=/results for ([^\:]*)?\s+\:/,x=/([^\:]+)\:/,y=[{label:"Cat",url:f},{label:"CSI",url:h},{label:"Iridium",url:g},{label:"Browse",url:S},{label:"Offer",url:v},{label:"A9 SDM",url:b},{label:"PAS",url:C},{label:"Where's My Asin",url:A},{label:"Analytics",url:k}],I={marketplace:t.getMarketplace(),marketplaceId:t.getMarketplaceId(),marketplaceShortName:t.getMarketplaceName(),stack:t.getStack(),stackUpperCase:t.getStack().toUpperCase(),alternateMarketplaceName:t.getAlternateMarketplaceName(),docIdSuffix:function(){return 1===t.getMarketplaceId()?"":":"+t.getMarketplaceId()}()};return{debugLinks:n,categoryName:a,getGeneralInfo:d,getKeywords:m,getSorting:u}}),P.when("A","a-popover","a-switch","sirt-util","sirt-base-extractors","a-popover-util","sirt-cookie-util","sirt-acs-data","sirt-marketplace-info","ready").register("a9-cs-sirt",function(e,t,r,n,a,i,o,s,l){function c(e){return(new Date).getTime()+Math.random().toString(36).slice(2)+"."+e}function u(e,t,r,n){var i=null;if(null!=ne&&null!=ne.marketplaceShortName){if(i=ne.marketplaceShortName+": "+ne.searchAlias+": "+a.getKeywords(),null!=e){var o=e.regionName(t);null!=o&&(i+=", "+o)}null!=n&&(i+=": "+n),null!=r&&null!=r.asin&&(i+=" ("+r.asin+")")}return i}function p(e){var t=function(){return l.getMarketplaceId()}();return 6===t?e.find("a.s-access-detail-page").parent().next().find("span.a-color-secondary").last().text()||"No brand found":e.find("span.a-color-secondary:contains(by),span.a-color-secondary:contains(von)").nextAll("span.a-color-secondary").text()||"No brand found"}function d(){for(var e=$("li.s-result-item"),t=null,r=null,n=0,a=e.length;n<a;n++)r=$(e[n]),t=r.attr("data-asin"),null!=s[t]&&r.attr("data-sirt-acs-widget","true")}function m(e){var t=e.filename,r=e.a9_ss_xml_filename,n=e.creditFilename,i=e.regionApi,o=e.problem,s=e.data,l=["\n***"],c=a.getKeywords();l.push("**Keywords**: "+c),null!=ne&&(l.push("**Market**: "+ne.marketplace.replace(/amazon/,"Amazon")),null!=ne.searchAlias&&l.push("**Search Alias**: "+ne.searchAlias),null!=ne.store&&l.push("**Store**: "+ne.store),l.push("**Sorting**: "+a.getSorting())),null!=q&&l.push("**Problem Area**: "+q.regionName($(oe))),null!=o&&(l.push("**Problems**"),l.push("- "+o+"\n"));for(var u=null!=i?i.properties:[],p=!1,d=0,m=null,f=0;f<u.length;f++)m=u[f],null!=s[m]&&"labels"!==m&&("asin"===m&&(p=!0,d=f),"image"===m?l.push("\n![Product Title]("+s[m]+")"):"dpUrl"===m?l.push("["+Q[m]+"]("+s[m]+")"):/^https?/.test(s[m])?l.push("["+Q[m]+"]("+s[m]+")"):l.push("**"+(Q[m]||m)+"**: "+s[m]));l.push("***"),l.push("**Snapshots and Reports**");var h=j.replace("https","http");return l.push("[Page HTML Snapshot]("+h+"/snapshots/"+t+")"),l.push("[Live Search]("+document.URL+")"),S(i,oe)&&null!=n&&(null!=n&&l.push("[CReDIT Snapshot]("+h+"/snapshots/"+n+")"),null!=r&&l.push("[Search Service XML Snapshot]("+h+"/snapshots/"+r+")")),null!=ne&&null!=ne.marketplaceId&&l.push("[Analytics Comprehensive Query Report]("+"https://analytics.search.amazon.com/controller.php?rn=comprehensive#query={query}&marketplace={mkt}&alias={search-alias}".replace(/\{mkt\}/g,ne.marketplaceId).replace(/\{search\-alias\}/g,ne.searchAlias).replace(/\{query\}/g,encodeURIComponent(c))+")"),p&&(l.push("***"),l.push("**ASIN Diagnostics**"),m=u[d],l.push(a.debugLinks(s[m]))),null!=ne&&null!=ne.weblabs&&l.push(ne.weblabs),null!=ne&&null!=ne.slWeblabs&&null!=i&&"3rd Party Sponsored Link Ads"==i.regionName($(oe))&&l.push(ne.slWeblabs),l.push("***"),l.join("\n")}function f(e,t,r){e.push({name:t,value:r})}function h(e){return Q[e]+":"+ne[e]}function g(e,t){var r=null!=q?e.properties:[];r.indexOf("labels")!=-1&&null!=X.labels&&f(t,"labels[]",X.labels),r.indexOf("category")!=-1&&null!=X.category&&f(t,"labels[]",X.category)}function S(e,t){return null!=e&&"Product"===e.regionName(t)}function v(e){return null!=e&&e.creditSnapshot}function b(e,t,r,n){var i=c("html"),o=null;null!=ne&&(o=c("xml"),f(t,"a9_ss_xml_filename",o),f(t,"a9_sst_url",ne.searchServiceUrl),f(t,"labels[]",h("marketplace").replace(/amazon/,"Amazon")),f(t,"labels[]",h("store")),f(t,"labels[]",h("searchAlias"))),g(n,t);var s=$.grep(t,function(e){return"problem"===e.name})[0].value;f(t,"labels[]",s);var p=u(n,e,r,s);f(t,"title",p);var d=null;v(n)&&(d=te.current);var b=m({filename:i,a9_ss_xml_filename:o,creditFilename:d,regionApi:n,data:r,problem:s});f(t,"extraDescription",b),f(t,"filename",i),f(t,"htmlSource",y()),S(n,e)&&f(t,"asin",r.asin),f(t,"marketplace_id",l.getMarketplaceId()),f(t,"keywords",a.getKeywords()),A(t,i)}function A(e){var t=oe;$.ajax({url:j+"/sim/create",type:"POST",crossDomain:!0,xhrFields:{withCredentials:!0},dataType:"json",data:e,success:function(e){C();var r=e.issue_id;r&&(C(),x(r),null!=t&&t.find("span.sirt-flag").addClass("sirt-flag-submitted"))},error:function(){C()}})}function k(e){var t=['<div class="a-box a-alert-inline a-alert-inline-success"><div class="a-box-inner a-alert-container"><i class="a-icon a-icon-alert"></i><div class="a-alert-content">'];return t.push('<a href="'),t.push(W),t.push("/issues/"+e),t.push('" target="_blank">'),t.push("SIM Issue"),t.push("</a> created on your behalf."),t.push("</div></div></div>"),t.join("")}function C(){null!=J&&i.trigger("ajaxContentLoaded",J)}function w(){null!=J&&i.showSpinner(J)}function x(e){null!=J&&(J.getContent().find("div:first").html(k(e)),J.refresh())}function y(){Y=Y.replace("click_withinLazyLoad_tower","click_withinLazyLoad_tower-s"),Y=Y.replace(/search\-credit\-core\.js/g,"nothing.js"),Y=Y.replace(/sirt\.js/g,"nothing.js");var e=["<head>"];return e.push('<base href="'),e.push(document.location.protocol),e.push('//www.amazon.com" >'),e.push('<style type="text/css">div.a-popover{display:none!important;}'),e.push("</style>"),Y.replace(/\<head\>/,e.join(""))}function I(){var t=c("html");te[t]={filename:t,hasSource:!1,source:null},te.current=t;var r=window.open(document.location+"&debug=service&sirt=false","sirt_credit_snapshot_"+ee++,"toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,left="+10*screen.width+", top=0, width=10, height=10, visible=none","");setTimeout(function(){window.blur(),window.focus()},100),setTimeout(function(){var e=$(r.document).find("script[src*=search-credit-core]").length>0;if(!e){var t=r.document.createElement("script");t.type="text/javascript",t.id="sirt-credit-script",t.src="//a9-search-credit.amazon.com/js/search-credit-1.0.0/search-credit-core.js",r.document.body.appendChild(t)}},4e3),setTimeout(function(){var n=e.$(r.document);n.find("#sirt-credit-script").remove(),te[t].source=n.find("html")[0].outerHTML,te[t].hasSource=!0,_(te[t]),setTimeout(function(){r.close()},1e3)},3e4)}function _(e){$.ajax({url:j+"/sim/upload",type:"POST",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},data:{filename:e.filename,source:e.source},success:function(){},error:function(){}})}function U(){d();var t=null,r=null;e.each(Z,function(e,n){t="sirt-modal-"+n,r="sirt-region-"+n,e.modalId=t,e.id=r,$(e.selector).each(function(t){if(null==$(this).attr("data-sirt-region-id")){$(this).attr("data-sirt-region-id",e.id),$(this).attr("data-sirt-region-name",e.regionName($(this))),null!=e.decorate&&e.decorate($(this),t);var n=$.random(),a=$(this);null!=e.flagSelector&&(a=$(this).find(e.flagSelector)),e.hover=!0;var i=e.hover?"a-hidden":"",o=$('<span class="sirt-flag '+i+'"><i class="sirt-flag-icon"></i></span>').prependTo(a.css("position","relative")),s=$('<span class="sirt-flag-overlay"></span>').prependTo(a);e.hover&&(a.bind("mouseenter",{ele:o},N),a.bind("mouseleave",{ele:o},B)),o.bind("mouseenter",{ele:o,overlay:s},P),o.bind("mouseleave",{ele:o,overlay:s},O),o.one("click",{modalId:n,itemId:r,url:e.formContentUrl,ele:o,overlay:s,container:a,regionApi:e,hover:e.hover||!1},R)}})})}function R(e){e.preventDefault(),null==ne&&(ie=D(!0));var t=e.data,r=M(e.data);$.when(L(e.data)).then(function(e){r.update({content:e.content}),i.trigger("ajaxContentLoaded",r),i.trigger("ajaxSuccess",r)},function(){r.update({content:'<div class="a-box a-alert a-alert-error a-spacing-top-large"><div class="a-box-inner a-alert-container"><h4 class="a-alert-heading">Error message</h4><i class="a-icon a-icon-alert"></i><div class="a-alert-content">There seems to be a problem loading the form. Close the form and try again. If the issue persists report the issue <a href="https://tt.amazon.com/quicklink/Q000408995" target="_blank">here</a>.</div></div></div>'}),t.ele.one("click",t,R)})}function N(e){e.data.ele.removeClass("a-hidden")}function B(e){e.data.ele.addClass("a-hidden")}function P(e){e.data.overlay.addClass("sirt-flag-overlay-selected"),e.data.ele.addClass("sirt-flag-selected")}function O(e){e.data.overlay.removeClass("sirt-flag-overlay-selected"),e.data.ele.removeClass("sirt-flag-selected")}function M(r){var n=r.overlay,a=r.ele,o=a.offset(),s=$(window).width(),l=350,c=r.hover,u=this,p=o.left+l+50>=s?"triggerLeft":"triggerRight",d=t.create(a,{name:r.modalId,width:l+"",position:r.position||p,inlineContent:r.content||"Loading..",dataStrategy:"inline",activate:"onclick"});return d.show(),i.showSpinner(d),e.on("a:popover:afterHide:"+r.modalId,function(){if(n.removeClass("sirt-flag-overlay-selected-on-click"),a.removeClass("sirt-flag-selected-on-click"),c&&!a.hasClass("sirt-flag-submitted")){a.addClass("a-hidden");var e=r.container;e.bind("mouseenter",{ele:a},N),e.bind("mouseleave",{ele:a},B)}}),e.on("a:popover:afterShow:"+r.modalId,function(){c&&$(r.container).unbind("mouseenter mouseleave"),J=d,null!=r.regionApi?(q=r.regionApi,oe=r.container,n.addClass("sirt-flag-overlay-selected-on-click"),a.addClass("sirt-flag-selected-on-click"),d.extractedData=z(r.container,r.regionApi)):(q=null,oe=null),Y=$("html")[0].outerHTML,v(r.regionApi)&&K()&&(se=document.URL,I(),V())}),e.on("a:popover:ajaxSuccess:"+r.modalId,function(){d.getContent().find("form").submit(function(e){e.preventDefault(),w();var t=$(this);$.when(ie).then(function(){b.call(u,r.container,t.serializeArray(),d.extractedData,r.regionApi)})})}),d}function L(e){var t=null;return null!=re[e.url]?(t=$.Deferred(),t.resolve(re[e.url])):t=$.ajax({type:"GET",crossDomain:!0,xhrFields:{withCredentials:!0},url:e.url,cache:!1}),t.pipe(H(e.url)).pipe(T(e))}function H(e){return function(t){return re[e]=t,t}}function T(e){return function(t){return{content:t,data:e}}}function D(e){return ne=null,e?ae=0:ae++,a.getGeneralInfo().done(function(e){ne=e})}function z(e,t){for(var r=t.properties,n=t.extractors,a=null,i=null,o={},s=0;s<r.length;s++)a=r[s],i=n[a](e),null!=i&&(o[a]=i);return o}function V(){var e=null;for(var t in te)e=te[t],e.hasSource&&e.current!=t&&delete e[t]}function K(){return document.URL!=se}function E(){var r=$("#sirt-report-problem-link");r.length>0?t.remove(r):r=$('<a id="sirt-report-problem-link" href="javascript:void(0)" class="" >Report a search issue&nbsp;<i class="sirt-flag-icon"></i></a>').appendTo("#s-result-count > span");var n=$([]);r.one("click",{modalId:"generic"+e.now(),itemId:"",url:j+"/sirt_form?region_name=Whole+Page",ele:r,overlay:n,container:n,regionApi:null,hover:!1,position:"triggerBottom"},R)}function F(){if(!($("#sirt-alert").length>0||o.isSet("sirt-alert"))){var e=$('<div id="sirt-alert" class="a-box a-alert a-alert-info a-spacing-large a-spacing-top-large"><div class="a-box-inner a-alert-container"><button data-action="a-popover-close" class="a-button-close a-declarative" aria-label="Close"><i class="a-icon a-icon-close"></i></button><h4 class="a-alert-heading">Help us improve Search</h4><i class="a-icon a-icon-alert"></i><div class="a-alert-content">Help us improve search by reporting problems with the SIRT tool. Hovering over search results provides a flag to report issues on a specific search result. <a href="https://w.amazon.com/index.php/Search_Issue_Reporting_Tools_V2" target="_blank">Learn More</a></div></div></div>').prependTo("#searchTemplate");e.find("button").click(function(){e.hide(),o.set("sirt-alert",!1)})}}var W="https://issues.amazon.com",j="https://sirt.corp.amazon.com",G=(n.template("https://browse-classification-{stack}.amazon.com/bcb/BrowseBrowser.do?nodeID={nodeId}&marketplaceID={marketplaceId}",{stack:l.getStack(),marketplaceId:l.getMarketplaceId()}),n.template("https://content-symphony-{stack}.amazon.com/mn/EnumclawApplication#markV1%28PlacementViewEdit,{obfusctedMarketplace},{merchantId}%29placementId@{placementId}",{stack:l.getStack(),obfusctedMarketplace:l.getObfuscatedMarketplace(),merchantId:l.getMerchantId()})),$=e.$,X={},J=null,q=null,Y=null,Z=[],Q={asin:"ASIN",dpUrl:"Detail Page (Live)",position:"Position in results",categoryTitle:"Category Title",categoryUrl:"Category URL",browseTreeUrl:"Browse Tree",refinementTitle:"Refinement Title",refinementUrl:"Refinement Live Search",title:"Title",image:"Image",brand:"Brand/Author/Narrator",description:"Description",price:"Price",category:"Category",csCampaign:"Content Symphony Placement",debugLinks:"ASIN Debug Links",spelling_suggestions:"Spelling Suggestions",keywords:"Keywords",searchAlias:"SearchAlias",marketplace:"Mkt",store:"Store",sorting:"Sorting",adDescription:"Ad Description",advertiserWebsiteUrl:"Advertiser Website",adUrl:"Ad Link",artist:"Artist",backlink:"Backlink",fkmrHeaderLink:"FKMR Header Link",breadcrumbs:"Breadcrumbs"};$.random=function(){return Math.floor(Math.random()*Math.pow(10,17))},Z.push({selector:"div.a-box-inner:has(a[href*='ref=sr_gnr_fkmr'])",properties:["fkmrHeader","fkmrHeaderLink"],extractors:{fkmrHeader:function(e){return e.text()},fkmrHeaderLink:function(e){return n.completeUrl(e.find("a").first().attr("href"))}},formContentUrl:j+"/sirt_form?region_name=FKMR+Header",regionName:function(){return"FKMR Header"}}),Z.push({selector:"div[id*=fkmr-results] li.s-result-item",properties:["image","asin","title","brand","price","position","dpUrl"],extractors:{asin:function(e){return e.attr("data-asin")},dpUrl:function(e){return e.find("a.s-access-detail-page").attr("href")},position:function(e){return parseInt(e.attr("id").split("_")[1],10)+1+""},title:function(e){return e.find(".s-access-title").first().text()},image:function(e){return e.find("img").first().attr("src")},brand:function(e){return p(e)},price:function(e){return e.find("span.a-color-price").first().text()}},formContentUrl:j+"/sirt_form?region_name=FKMR+Product",regionName:function(){return"FKMR Product"},creditSnapshot:!0}),Z.push({selector:"li[data-sirt-acs-widget]",properties:["asin","title","labels","position"],extractors:{asin:function(e){return e.attr("data-asin")},labels:function(e){var t=e.attr("data-asin");return 0!=e.find("a[href*='www.imdb.com']").length?"ACS:imdb":0!=e.find("a[href*=acs_ent_artist]").length?"ACS:artists":0!=e.find("a[href*=acs_va_item]").length?"ACS:video-shorts":"ACS:"+s[t]},title:function(e){if(e.has("a[href*=imdb]"))n.trim(e.find("a:eq(1)").parent().text());else{if(!e.has(".acs-mn-title"))return n.trim(e.find("a:eq(1)").text());n.trim(e.find(".acs-mn-title").text())}},position:function(e){return parseInt(e.attr("id").split("_")[1],10)+1+""}},formContentUrl:j+"/sirt_form?region_name=ACS+Widget",regionName:function(e){return this.extractors.labels(e).split(/[:-]/).join(" ")}}),Z.push({selector:"li.s-result-item:has(a[href*=pa_click_within_inline]),li.s-result-item:has(a[href*=pa_sp_btf]),li.s-result-item:has(a[href*=pa_sp_atf])",properties:["image","asin","title","brand","price","position","dpUrl"],extractors:{asin:function(e){return e.attr("data-asin")},dpUrl:function(e){return e.find("a.s-access-detail-page").attr("href")},position:function(e){return parseInt(e.attr("id").split("_")[1],10)+1+""},title:function(e){return e.find(".s-access-title").first().text()},image:function(e){return e.find("img").first().attr("src")},brand:function(e){return p(e)},price:function(e){return e.find("span.a-color-price").first().text()}},formContentUrl:j+"/sirt_form?region_name=Sponsored+Product",regionName:function(){return"Sponsored Product"},decorate:function(e){e.attr("data-sirt-sponsored-product","true")}}),Z.push({selector:"#atfResults li.s-result-item:not([data-sirt-acs-widget],[data-sirt-sponsored-products],[data-sirt-fkmr-product]),#mainResults li.s-result-item:not([data-sirt-acs-widget],[data-sirt-sponsored-products],[data-sirt-fkmr-product]),#catCorResults li.s-result-item:not([data-sirt-acs-widget],[data-sirt-sponsored-products],[data-sirt-fkmr-product])",properties:["image","asin","title","brand","category","description","price","position","dpUrl"],extractors:{asin:function(e){return e.attr("data-asin")},dpUrl:function(e){return e.find("a.s-access-detail-page").attr("href")},position:function(e){return parseInt(e.attr("id").split("_")[1],10)+1+""},title:function(e){return e.find(".s-access-title").first().text()},image:function(e){return e.find("img").first().attr("src")},brand:function(e){return p(e)},category:function(e){return a.categoryName(e)},description:function(){return null},price:function(e){return e.find("span.a-color-price").first().text()}},creditSnapshot:!0,formContentUrl:j+"/sirt_form?region_name=Product",regionName:function(){return"Product"}}),Z.push({selector:"div.celwidget:has(div.imageContainer),div.mp3Cell",properties:["image","asin","title","artist","category","price","dpUrl"],extractors:{asin:function(e){var t=this.dpUrl(e);if(null!=t){var r=t.match(/dp\/([A-Z0-9]+)\//);if(null!=r)return r[1]}return null},dpUrl:function(e){return e.find("div.imageContainer a,div.imageBox a").first().attr("href")},title:function(e){return n.trim(e.find("h3.newaps a").first().text())},image:function(e){return e.find("div.imageContainer img,div.imageBox img").first().attr("src")},artist:function(e){return e.find("span.reg a").first().text()},category:function(e){return a.categoryName(e)||"Digital Music"},price:function(e){return e.find("span.price").first().text()}},creditSnapshot:!0,formContentUrl:j+"/sirt_form?region_name=Product",regionName:function(){return"Product"}}),Z.push({selector:"div.pa-ad-details",properties:["image","title","asin","position","dpUrl"],extractors:{asin:function(e){var t=e.find("div.pa-sp-offer-title a").attr("href");return n.getParamValue("asin",t)},dpUrl:function(e){return n.completeUrl(n.trim(e.find("div.pa-sp-offer-title a").attr("href")))},position:function(e){return parseInt(e.attr("id").split("-")[3],10)+1+""},title:function(e){return e.find("div.pa-sp-offer-title a").text()},image:function(e){return e.find("img").first().attr("src")}},formContentUrl:j+"/sirt_form?region_name=Sponsored+Product",regionName:function(){return"Sponsored Product"}}),Z.push({selector:"div.cw_last_ad",properties:["image","title","brand","asin","position","dpUrl"],extractors:{asin:function(e){var t=e.find(".s-access-title").first().parent().attr("href");return n.getParamValue("asin",t)},dpUrl:function(e){return n.completeUrl(n.trim(e.find(".s-access-title").first().parent().attr("href")))},position:function(e){return parseInt(e.attr("data-sirt-index"),10)+1+""},title:function(e){return e.find(".s-access-title").first().text()},image:function(e){return e.find("img").first().attr("src")},brand:function(e){return e.find("div.a-color-secondary:contains(Available from)").text().replace("Available from ","")}},formContentUrl:j+"/sirt_form?region_name=Sponsored+Product",decorate:function(e,t){e.attr("data-sirt-index",t)},regionName:function(){return"Sponsored Product"}}),Z.push({selector:"div.cw_grid_ad",properties:["image","title","brand","asin","position","dpUrl"],extractors:{asin:function(e){var t=e.find("a").first().attr("href");return n.getParamValue("asin",t)},dpUrl:function(e){return n.completeUrl(n.trim(e.find("a").first().attr("href")))},position:function(e){return parseInt(e.attr("data-sirt-index"),10)+1+""},title:function(e){return e.find(".s-access-title").first().text()},image:function(e){return e.find("img").first().attr("src")},brand:function(e){return e.find("div.a-color-secondary:contains(Available from)").text().replace("Available from ","")}},formContentUrl:j+"/sirt_form?region_name=Sponsored+Product",decorate:function(e,t){e.attr("data-sirt-index",t)},regionName:function(){return"Sponsored Product"}}),Z.push({selector:"#refinements",properties:[],extractors:{},formContentUrl:j+"/sirt_form?region_name=Refinements",regionName:function(){return"Refinements"}}),Z.push({selector:"#centerPlus>div:has(a[href*='ref=sr_aiv_strp'])",properties:[],extractors:{},formContentUrl:j+"/sirt_form?region_name=Prime+Video+Ad",regionName:function(){return"Prime Video Ad"}}),Z.push({selector:"#centerPlus:has(div.prime-music-stripe)",properties:[],extractors:{},formContentUrl:j+"/sirt_form?region_name=Prime+Music+Ad",regionName:function(){return"Prime Music Ad"}}),Z.push({selector:"#desktop-auto-sparkle,#mobile-auto-sparkle,#raw-auto-sparkle,#desktop-signpost,#desktop-auto-sparkle-multi,#desktop-auto-sparkle-single",properties:["image","title","csCampaign"],extractors:{csCampaign:function(e){var t=n.getParamValue("pf_rd_p",e.find("a").attr("href"));return $.isArray(t)&&(t=t.pop()),null!=t?n.template(G,{placementId:t}):null},image:function(e){return e.find("img.sx-sparkle-image-medium:first").attr("src")},title:function(e){var t=e.find("a.sx-sparkle-title-primary");return t.length>0?t.text():e.text()}},formContentUrl:j+"/sirt_form?region_name=Signpost%2FSparkle",regionName:function(){return"Signpost/Sparkle"}}),Z.push({selector:"div.amsSparkleAdContainer,#amsSparkleAdContainer",properties:["image","title"],extractors:{image:function(e){var t=e.css("background-image");if(null!=t){var r=t.match(/url\(["']?([^'"]*)["']?\)/);if(null!=r)return r=r[1]}return null},title:function(e){var t=e.find(".amsSparkleHead").first();return t.length>0?t.text():e.text()}},formContentUrl:j+"/sirt_form?region_name=Signpost%2FSparkle",regionName:function(){return"Sparkle"}}),Z.push({selector:"#SponsoredLinksTable tr",hover:!0,flagSelector:"td:last",properties:["title","adDescription","adUrl","advertiserWebsiteUrl"],extractors:{title:function(e){return n.trim(e.find("span.SponsoredLinkTitle a").first().text())},adDescription:function(e){return n.trim(e.find("span.SponsoredLinkDescription").first().text())},adUrl:function(e){return n.completeUrl(e.find("span.SponsoredLinkTitle a").first().attr("href"))},advertiserWebsiteUrl:function(e){return n.trim(e.find("span.SponsoredLinkDescription").last().text())}},formContentUrl:j+"/sirt_form?region_name=Sponsored+Links",regionName:function(){return"3rd Party Sponsored Link Ads"}});var ee=0,te={},re={},ne=null,ae=0,ie=$.Deferred().resolve(null),oe=null,se=null;return{init:function(){this.updateSearchBoxValue(),F(),E(),U(),ne=null},updateSearchBoxValue:function(){$("#nav-search").find("input[type=text]").each(function(){$(this).attr("value",$(this).val())})}}}),P.when("A","a9-cs-sirt","ready").execute(function(e,t){function r(){setTimeout(function(){t.init(),a=1e3},a)}var n=e.$("script[src*=search-credit-core]").length>0,a=n&&/debug=service/.test(document.location)?2e4:1e3;/\/b\/?/.test(document.URL)?r():P.when("search-page-utilities").execute(function(e){
e.afterEvent("searchajax",function(){r()})})});